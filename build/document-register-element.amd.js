/*! (C) WebReflection Mit Style License */
define(function(){"use strict";function rt(e,t){for(var n=0,r=e.length;n<r;n++)vt(e[n],t)}function it(e){for(var t=0,n=e.length,r;t<n;t++)r=e[t],nt(r,m[ot(r)])}function st(e){return function(t){P(t)&&(vt(t,e),rt(t.querySelectorAll(g),e))}}function ot(e){var t=F.call(e,"is"),n=e.nodeName.toUpperCase(),r=b.call(v,t?h+t.toUpperCase():c+n);return t&&-1<r&&!ut(n,t)?-1:r}function ut(e,t){return-1<g.indexOf(e+'[is="'+t+'"]')}function at(e){var t=e.currentTarget,n=e.attrChange,r=e.attrName,i=e.target;Q&&(!i||i===t)&&t.attributeChangedCallback&&r!=="style"&&e.prevValue!==e.newValue&&t.attributeChangedCallback(r,n===e[s]?null:e.prevValue,n===e[u]?null:e.newValue)}function ft(e){var t=st(e);return function(e){X.push(t,e.target)}}function lt(e){K&&(K=!1,e.currentTarget.removeEventListener(f,lt)),rt((e.target||document).querySelectorAll(g),e.detail===r?r:n),D&&pt()}function ct(e,t){var n=this;R.call(n,e,t),G.call(n,{target:n})}function ht(e,n){O(e,n),et?et.observe(e,z):(J&&(e.setAttribute=ct,e[t]=Z(e),e.addEventListener(l,G)),e.addEventListener(a,at)),e.createdCallback&&Q&&(e.created=!0,e.createdCallback(),e.created=!1)}function pt(){for(var e,t=0,n=H.length;t<n;t++)e=H[t],y.contains(e)||(n--,H.splice(t--,1),vt(e,r))}function dt(e){throw new Error("A "+e+" type is already registered")}function vt(e,t){var i,s=ot(e);-1<s&&(tt(e,m[s]),s=0,t===n&&!e[n]?(e[r]=!1,e[n]=!0,s=1,D&&b.call(H,e)<0&&H.push(e)):t===r&&!e[r]&&(e[n]=!1,e[r]=!0,s=1),s&&(i=e[t+"Callback"])&&i.call(e))}var e="registerElement";if(e in document)return;var t="__"+e+(Math.random()*1e5>>0),n="attached",r="detached",i="extends",s="ADDITION",o="MODIFICATION",u="REMOVAL",a="DOMAttrModified",f="DOMContentLoaded",l="DOMSubtreeModified",c="<",h="=",p=/^[A-Z][A-Z0-9]*(?:-[A-Z0-9]+)+$/,d=["ANNOTATION-XML","COLOR-PROFILE","FONT-FACE","FONT-FACE-SRC","FONT-FACE-URI","FONT-FACE-FORMAT","FONT-FACE-NAME","MISSING-GLYPH"],v=[],m=[],g="",y=document.documentElement,b=v.indexOf||function(e){for(var t=this.length;t--&&this[t]!==e;);return t},w=Object.prototype,E=w.hasOwnProperty,S=w.isPrototypeOf,x=Object.defineProperty,T=Object.getOwnPropertyDescriptor,N=Object.getOwnPropertyNames,C=Object.getPrototypeOf,k=Object.setPrototypeOf,L=!!Object.__proto__,A=Object.create||function mt(e){return e?(mt.prototype=e,new mt):this},O=k||(L?function(e,t){return e.__proto__=t,e}:N&&T?function(){function e(e,t){for(var n,r=N(t),i=0,s=r.length;i<s;i++)n=r[i],E.call(e,n)||x(e,n,T(t,n))}return function(t,n){do e(t,n);while((n=C(n))&&!S.call(n,t));return t}}():function(e,t){for(var n in t)e[n]=t[n];return e}),M=window.MutationObserver||window.WebKitMutationObserver,_=(window.HTMLElement||window.Element||window.Node).prototype,D=!S.call(_,y),P=D?function(e){return e.nodeType===1}:function(e){return S.call(_,e)},H=D&&[],B=_.cloneNode,j=_.dispatchEvent,F=_.getAttribute,I=_.hasAttribute,q=_.removeAttribute,R=_.setAttribute,U=document.createElement,z=M&&{attributes:!0,characterData:!0,attributeOldValue:!0},W=M||function(e){J=!1,y.removeEventListener(a,W)},X,V=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(e){setTimeout(e,10)},$=!1,J=!0,K=!0,Q=!0,G,Y,Z,et,tt,nt;k||L?(tt=function(e,t){S.call(t,e)||ht(e,t)},nt=ht):(tt=function(e,n){e[t]||(e[t]=Object(!0),ht(e,n))},nt=tt),D?(J=!1,function(){var e=T(_,"addEventListener"),n=e.value,r=function(e){var t=new CustomEvent(a,{bubbles:!0});t.attrName=e,t.prevValue=F.call(this,e),t.newValue=null,t[u]=t.attrChange=2,q.call(this,e),j.call(this,t)},i=function(e,t){var n=I.call(this,e),r=n&&F.call(this,e),i=new CustomEvent(a,{bubbles:!0});R.call(this,e,t),i.attrName=e,i.prevValue=n?r:null,i.newValue=t,n?i[o]=i.attrChange=1:i[s]=i.attrChange=0,j.call(this,i)},f=function(e){var n=e.currentTarget,r=n[t],i=e.propertyName,u;r.hasOwnProperty(i)&&(r=r[i],u=new CustomEvent(a,{bubbles:!0}),u.attrName=r.name,u.prevValue=r.value||null,u.newValue=r.value=n[i]||null,u.prevValue==null?u[s]=u.attrChange=0:u[o]=u.attrChange=1,j.call(n,u))};e.value=function(e,s,o){e===a&&this.attributeChangedCallback&&this.setAttribute!==i&&(this[t]={className:{name:"class",value:this.className}},this.setAttribute=i,this.removeAttribute=r,n.call(this,"propertychange",f)),n.call(this,e,s,o)},x(_,"addEventListener",e)}()):M||(y.addEventListener(a,W),y.setAttribute(t,1),y.removeAttribute(t),J&&(G=function(e){var n=this,r,i,a;if(n===e.target){r=n[t],n[t]=i=Z(n);for(a in i){if(!(a in r))return Y(0,n,a,r[a],i[a],s);if(i[a]!==r[a])return Y(1,n,a,r[a],i[a],o)}for(a in r)if(!(a in i))return Y(2,n,a,r[a],i[a],u)}},Y=function(e,t,n,r,i,s){var o={attrChange:e,currentTarget:t,attrName:n,prevValue:r,newValue:i};o[s]=e,at(o)},Z=function(e){for(var t,n,r={},i=e.attributes,s=0,o=i.length;s<o;s++)t=i[s],n=t.name,n!=="setAttribute"&&(r[n]=t.value);return r})),document[e]=function(t,s){y=t.toUpperCase(),$||($=!0,M?(et=function(e,t){function n(e,t){for(var n=0,r=e.length;n<r;t(e[n++]));}return new M(function(r){for(var i,s,o,u=0,a=r.length;u<a;u++)i=r[u],i.type==="childList"?(n(i.addedNodes,e),n(i.removedNodes,t)):(s=i.target,Q&&s.attributeChangedCallback&&i.attributeName!=="style"&&(o=F.call(s,i.attributeName),o!==i.oldValue&&s.attributeChangedCallback(i.attributeName,i.oldValue,o)))})}(st(n),st(r)),et.observe(document,{childList:!0,subtree:!0})):(X=[],V(function x(){while(X.length)X.shift().call(null,X.shift());V(x)}),document.addEventListener("DOMNodeInserted",ft(n)),document.addEventListener("DOMNodeRemoved",ft(r))),document.addEventListener(f,lt),document.addEventListener("readystatechange",lt),document.createElement=function(e,t){var n=U.apply(document,arguments),r=""+e,i=b.call(v,(t?h:c)+(t||r).toUpperCase()),s=-1<i;return t&&(n.setAttribute("is",t=t.toLowerCase()),s&&(s=ut(r.toUpperCase(),t))),Q=!document.createElement.innerHTMLHelper,s&&nt(n,m[i]),n},_.cloneNode=function(e){var t=B.call(this,!!e),n=ot(t);return-1<n&&nt(t,m[n]),e&&it(t.querySelectorAll(g)),t}),-2<b.call(v,h+y)+b.call(v,c+y)&&dt(t);if(!p.test(y)||-1<b.call(d,y))throw new Error("The type "+t+" is invalid");var o=function(){return a?document.createElement(l,y):document.createElement(l)},u=s||w,a=E.call(u,i),l=a?s[i].toUpperCase():y,y,S;return a&&-1<b.call(v,c+l)&&dt(l),S=v.push((a?h:c)+y)-1,g=g.concat(g.length?",":"",a?l+'[is="'+t.toLowerCase()+'"]':l),o.prototype=m[S]=E.call(u,"prototype")?u.prototype:A(_),rt(document.querySelectorAll(g),n),o}});